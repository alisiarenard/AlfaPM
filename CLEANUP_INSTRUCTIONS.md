# üßπ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –æ—á–∏—Å—Ç–∫–µ –∞—Ä—Ö–∏–≤–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤

## üìã –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

–°–∫—Ä–∏–ø—Ç `cleanup_archived_initiatives.sql` –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:

1. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –î–û –æ—á–∏—Å—Ç–∫–∏ (—Å–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤, —Å–∫–æ–ª—å–∫–æ –∞—Ä—Ö–∏–≤–Ω—ã—Ö)
2. ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –∞—Ä—Ö–∏–≤–Ω—ã–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã (`condition = '2-archived'`)
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á —Å–≤—è–∑–∞–Ω–æ —Å –∞—Ä—Ö–∏–≤–Ω—ã–º–∏ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞–º–∏
4. ‚úÖ **–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç** —ç—Ç–∏ –∑–∞–¥–∞—á–∏ –Ω–∞ "–ü–æ–¥–¥–µ—Ä–∂–∫—É –±–∏–∑–Ω–µ—Å–∞" (`init_card_id = 0`)
5. ‚úÖ –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –∞—Ä—Ö–∏–≤–Ω—ã–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã
6. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ü–û–°–õ–ï –æ—á–∏—Å—Ç–∫–∏

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å (–õ–æ–∫–∞–ª—å–Ω–æ –Ω–∞ Windows)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ psql (–∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)

```bash
# 1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É (cmd –∏–ª–∏ PowerShell)
# 2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Å –ø—Ä–æ–µ–∫—Ç–æ–º
cd –ø—É—Ç—å\–∫\–≤–∞—à–µ–º—É\–ø—Ä–æ–µ–∫—Ç—É

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç
psql -U postgres -d –≤–∞—à–∞_–±–∞–∑–∞_–¥–∞–Ω–Ω—ã—Ö -f cleanup_archived_initiatives.sql
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ pgAdmin (GUI)

1. –û—Ç–∫—Ä–æ–π—Ç–µ **pgAdmin**
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –≤–∞—à–µ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `cleanup_archived_initiatives.sql`
4. –ù–∞–∂–º–∏—Ç–µ **Execute/Run** (F5)
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ **Messages** –≤–∫–ª–∞–¥–∫–µ

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ DBeaver (GUI)

1. –û—Ç–∫—Ä–æ–π—Ç–µ **DBeaver**
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –≤–∞—à–µ–π –ª–æ–∫–∞–ª—å–Ω–æ–π PostgreSQL –±–∞–∑–µ
3. –û—Ç–∫—Ä–æ–π—Ç–µ **SQL Editor**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `cleanup_archived_initiatives.sql`
5. –ù–∞–∂–º–∏—Ç–µ **Execute SQL Script** (Ctrl+Enter)
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –í–∞—Ä–∏–∞–Ω—Ç 4: –ß–µ—Ä–µ–∑ VS Code + PostgreSQL extension

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ **PostgreSQL** –≤ VS Code
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `cleanup_archived_initiatives.sql`
4. –ù–∞–∂–º–∏—Ç–µ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π ‚Üí **Run Query**

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é** (BEGIN...COMMIT), –ø–æ—ç—Ç–æ–º—É:

- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **–∞—Ç–æ–º–∞—Ä–Ω–æ**
- –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫, –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä–∏–ø—Ç –¥–µ–ª–∞–µ—Ç COMMIT** (–ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ **—Å–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å**, —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ:

1. –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É `COMMIT;` –≤ –∫–æ–Ω—Ü–µ —Å–∫—Ä–∏–ø—Ç–∞
2. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É `-- ROLLBACK;`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
5. –ï—Å–ª–∏ –≤—Å—ë –æ–∫, –≤–µ—Ä–Ω–∏—Ç–µ `COMMIT;` –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
status         | total_initiatives | archived_initiatives | live_initiatives
---------------|-------------------|----------------------|-----------------
BEFORE CLEANUP | 150               | 45                   | 105

info                      | count | card_ids
--------------------------|-------|------------------
ARCHIVED INITIATIVES      | 45    | {1234, 5678, ...}

info                      | tasks_count
--------------------------|------------
TASKS LINKED TO ARCHIVED  | 23

status              | redirected_to_business_support
--------------------|-------------------------------
TASKS REDIRECTED    | 23

status         | total_initiatives | archived_initiatives | live_initiatives
---------------|-------------------|----------------------|-----------------
AFTER CLEANUP  | 105               | 0                    | 105
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

1. –ó–∞–π–¥–∏—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
3. –ù–∞–∂–º–∏—Ç–µ "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å Kaiten" –¥–ª—è –ª—é–±–æ–π –∫–æ–º–∞–Ω–¥—ã
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–µ–ø–µ—Ä—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–µ–∞—Ä—Ö–∏–≤–Ω—ã–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

–ï—Å–ª–∏ –≤—ã —Å–ª—É—á–∞–π–Ω–æ –∑–∞–ø—É—Å—Ç–∏–ª–∏ —Å–∫—Ä–∏–ø—Ç –∏ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–ù–ï –ü–ê–ù–ò–ö–£–ô–¢–ï!** –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é, –Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ
2. –ï—Å–ª–∏ —É–∂–µ —Å–¥–µ–ª–∞–ª–∏ COMMIT –∏ —Ö–æ—Ç–∏—Ç–µ –≤–µ—Ä–Ω—É—Ç—å –¥–∞–Ω–Ω—ã–µ:
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ë–î
   - –ò–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã —Å Kaiten

## üîÑ –î–∞–ª—å–Ω–µ–π—à–∞—è —Ä–∞–±–æ—Ç–∞

–ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏:

- –ù–æ–≤—ã–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã –±—É–¥—É—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è **–ë–ï–ó –∞—Ä—Ö–∏–≤–Ω—ã—Ö**
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–µ–∞—Ä—Ö–∏–≤–Ω—ã–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã **–Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã**
- –ó–∞–¥–∞—á–∏ –æ—Ç –∞—Ä—Ö–∏–≤–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤ **–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–∏–∑–Ω–µ—Å–∞"**
